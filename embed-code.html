<!-- ChatGPT Bubble Chat Widget -->
<div id="gpt-widget">
  <div id="gpt-window">
    <div id="gpt-header">AI Assistant</div>
    <div id="gpt-messages"></div>
    <div id="gpt-input-area">
      <input id="gpt-input" type="text" placeholder="Type your message..." />
      <button id="gpt-send">âž¤</button>
    </div>
  </div>
  <button id="gpt-toggle">ðŸ’¬</button>
</div>

<style>
  #gpt-widget { position: fixed; bottom: 20px; right: 20px; font-family: Arial, sans-serif; z-index: 9999; }
  #gpt-toggle { background: #007bff; color: white; border: none; border-radius: 50%; padding: 14px; cursor: pointer; font-size: 20px; box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
  #gpt-window { display: none; flex-direction: column; width: 320px; height: 420px; background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.3); }
  #gpt-header { background: #007bff; color: white; padding: 10px; font-weight: bold; text-align: center; }
  #gpt-messages { flex: 1; padding: 10px; overflow-y: auto; font-size: 14px; display: flex; flex-direction: column; gap: 6px; }
  .gpt-msg { padding: 8px 10px; border-radius: 15px; max-width: 80%; line-height: 1.4; }
  .gpt-user { align-self: flex-end; background: #007bff; color: white; border-bottom-right-radius: 0; }
  .gpt-bot { align-self: flex-start; background: #f1f1f1; border-bottom-left-radius: 0; }
  #gpt-input-area { display: flex; border-top: 1px solid #ddd; }
  #gpt-input { flex: 1; border: none; padding: 10px; font-size: 14px; outline: none; }
  #gpt-send { background: #007bff; color: white; border: none; padding: 0 15px; cursor: pointer; }
</style>

<script>
  const apiURL = "https://your-vercel-project.vercel.app/api/chat"; // change to your deployed API URL

  const toggleBtn = document.getElementById("gpt-toggle");
  const chatWindow = document.getElementById("gpt-window");
  const sendBtn = document.getElementById("gpt-send");
  const input = document.getElementById("gpt-input");
  const messagesDiv = document.getElementById("gpt-messages");

  toggleBtn.onclick = () => {
    chatWindow.style.display = chatWindow.style.display === "flex" ? "none" : "flex";
  };

  async function sendMessage() {
    const userMsg = input.value.trim();
    if (!userMsg) return;
    addMessage(userMsg, "user");
    input.value = "";

    const res = await fetch(apiURL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ message: userMsg })
    });
    const data = await res.json();
    addMessage(data.reply, "bot");
  }

  function addMessage(text, sender) {
    const msg = document.createElement("div");
    msg.className = "gpt-msg " + (sender === "user" ? "gpt-user" : "gpt-bot");
    msg.textContent = text;
    messagesDiv.appendChild(msg);
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
  }

  sendBtn.onclick = sendMessage;
  input.addEventListener("keypress", e => {
    if (e.key === "Enter") sendMessage();
  });
</script>
